# æœ¬åœ°å¼€å‘å¯åŠ¨æŒ‡å—

## ğŸ“‹ æœåŠ¡ç«¯å£é…ç½®

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Web å‰ç«¯ | 9002 | Next.js å¼€å‘æœåŠ¡å™¨ |
| API åç«¯ | 9001 | Fastify API æœåŠ¡å™¨ |

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å¯åŠ¨åç«¯ API æœåŠ¡ï¼ˆç«¯å£ 9001ï¼‰

```bash
# è¿›å…¥ API ç›®å½•
cd apps/api

# ç¡®ä¿ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
# å¦‚æœæ²¡æœ‰ .env æ–‡ä»¶ï¼Œä»ç¤ºä¾‹åˆ›å»º
cp .env.example .env

# ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„ç«¯å£
# PORT=9001

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

åç«¯æœåŠ¡å°†åœ¨ **http://localhost:9001** å¯åŠ¨

### 2. å¯åŠ¨å‰ç«¯ Web æœåŠ¡ï¼ˆç«¯å£ 9000ï¼‰

```bash
# æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£
# è¿›å…¥ Web ç›®å½•
cd apps/web

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ **http://localhost:9002** å¯åŠ¨

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

### API æœåŠ¡ (.env)

```bash
# æœåŠ¡ç«¯å£
PORT=9001

# æ•°æ®åº“
DATABASE_URL=postgresql://user:password@localhost:5432/hongbao

# Redis
REDIS_URL=redis://localhost:6379

# JWT è®¤è¯
JWT_SECRET=your_jwt_secret_change_me
JWT_EXPIRES_IN=7d

# Linear API
LINEAR_API_KEY=lin_api_DcgDIlxzYugNfufvOVrB0UzojnbfAdNvyLE0EQme

# åŒºå—é“¾é…ç½®
ETHEREUM_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
DEGIFT_CONTRACT_ADDRESS=0x...
```

### Web å‰ç«¯ (.env.local)

```bash
# API åœ°å€
NEXT_PUBLIC_API_URL=http://localhost:9001

# é’±åŒ…è¿æ¥
NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID=your_project_id
```

## ğŸ“¦ ä¾èµ–å®‰è£…

å¦‚æœæ˜¯é¦–æ¬¡å¯åŠ¨ï¼Œéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
pnpm install

# æˆ–è€…åˆ†åˆ«åœ¨å„ä¸ªç›®å½•å®‰è£…
cd apps/api && pnpm install
cd ../web && pnpm install
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
# è¿›å…¥ API ç›®å½•
cd apps/api

# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm prisma:generate

# è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm prisma:migrate

# ï¼ˆå¯é€‰ï¼‰å¡«å……æµ‹è¯•æ•°æ®
pnpm seed
```

## ğŸ¯ è®¿é—® DeGift åŠŸèƒ½

å¯åŠ¨æœåŠ¡åï¼Œå¯ä»¥è®¿é—®ä»¥ä¸‹é¡µé¢ï¼š

| é¡µé¢ | URL | è¯´æ˜ |
|------|-----|------|
| é¦–é¡µ | http://localhost:9002 | åº”ç”¨é¦–é¡µ |
| åˆ›å»ºç¤¼ç‰© | http://localhost:9002/gift/create | åˆ›å»ºæ–°ç¤¼ç‰© |
| ç¤¼ç‰©åˆ—è¡¨ | http://localhost:9002/gifts | æŸ¥çœ‹æ‰€æœ‰ç¤¼ç‰© |
| ç¤¼ç‰©è¯¦æƒ… | http://localhost:9002/gift/[id] | æŸ¥çœ‹ç¤¼ç‰©è¯¦æƒ… |

## ğŸ› ï¸ å¼€å‘å·¥å…·å‘½ä»¤

### API ç›¸å…³

```bash
cd apps/api

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰
pnpm dev

# è¿è¡Œæµ‹è¯•
pnpm test

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage

# æ•°æ®åº“æ“ä½œ
pnpm prisma:generate    # ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm prisma:migrate     # è¿è¡Œè¿ç§»
pnpm seed               # å¡«å……æ•°æ®

# Linear ä»»åŠ¡ç®¡ç†
npx tsx scripts/list-linear-issues.ts          # æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
npx tsx scripts/list-my-issues.ts              # æŸ¥çœ‹æˆ‘çš„ä»»åŠ¡
npx tsx scripts/get-issue-details.ts ZES-77   # æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
```

### Web å‰ç«¯ç›¸å…³

```bash
cd apps/web

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# ç±»å‹æ£€æŸ¥
pnpm type-check

# ä»£ç æ£€æŸ¥
pnpm lint
```

## ğŸ” æ£€æŸ¥æœåŠ¡çŠ¶æ€

### æ£€æŸ¥ API æœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
# æ–¹æ³•1: ä½¿ç”¨ curl
curl http://localhost:9001/health

# æ–¹æ³•2: åœ¨æµè§ˆå™¨è®¿é—®
open http://localhost:9001
```

### æ£€æŸ¥ Web æœåŠ¡æ˜¯å¦è¿è¡Œ

```bash
# åœ¨æµè§ˆå™¨è®¿é—®
open http://localhost:9002
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£è¢«å ç”¨

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :9001
lsof -i :9000

# ç»“æŸè¿›ç¨‹
kill -9 <PID>
```

### 2. ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜åé‡æ–°å®‰è£…
rm -rf node_modules
pnpm install
```

### 3. æ•°æ®åº“è¿æ¥å¤±è´¥

- ç¡®è®¤ PostgreSQL æœåŠ¡å·²å¯åŠ¨
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `DATABASE_URL` é…ç½®
- ç¡®è®¤æ•°æ®åº“å·²åˆ›å»º

### 4. Linear API å¯†é’¥é—®é¢˜

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $LINEAR_API_KEY

# æˆ–åœ¨ .env æ–‡ä»¶ä¸­ç¡®è®¤
grep LINEAR_API_KEY apps/api/.env
```

## ğŸ“± æµ‹è¯• DeGift åŠŸèƒ½

### 1. æµ‹è¯•åˆ›å»ºç¤¼ç‰©æµç¨‹

1. è®¿é—® http://localhost:9002/gift/create
2. è¿æ¥é’±åŒ…ï¼ˆä½¿ç”¨ RainbowKitï¼‰
3. é€‰æ‹©ç¤¼ç‰©ç±»å‹ï¼ˆToken æˆ– NFTï¼‰
4. å¡«å†™è¡¨å•
5. é€‰æ‹©ä¸»é¢˜
6. æäº¤åˆ›å»º

### 2. æµ‹è¯•ç¤¼ç‰©åˆ—è¡¨

1. è®¿é—® http://localhost:9002/gifts
2. æŸ¥çœ‹å·²åˆ›å»ºçš„ç¤¼ç‰©
3. æµ‹è¯•ç­›é€‰åŠŸèƒ½ï¼ˆAll/Sent/Receivedï¼‰

### 3. æµ‹è¯•ç¤¼ç‰©è¯¦æƒ…å’Œé¢†å–

1. è®¿é—® http://localhost:9002/gift/[id]
2. æŸ¥çœ‹ç¤¼ç‰©è¯¦æƒ…
3. æ·»åŠ  `?action=claim` æŸ¥çœ‹é¢†å–ç•Œé¢

## ğŸ”„ åŒæ—¶å¯åŠ¨æ‰€æœ‰æœåŠ¡

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è„šæœ¬åŒæ—¶å¯åŠ¨å‰åç«¯æœåŠ¡ï¼š

```bash
# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > start-dev.sh << 'EOF'
#!/bin/bash

echo "ğŸš€ å¯åŠ¨ luckyPocket å¼€å‘ç¯å¢ƒ..."

# å¯åŠ¨ API æœåŠ¡
echo "ğŸ“¡ å¯åŠ¨ API æœåŠ¡ (ç«¯å£ 9001)..."
cd apps/api && pnpm dev &
API_PID=$!

# ç­‰å¾… API å¯åŠ¨
sleep 3

# å¯åŠ¨ Web æœåŠ¡
echo "ğŸŒ å¯åŠ¨ Web æœåŠ¡ (ç«¯å£ 9000)..."
cd apps/web && pnpm dev &
WEB_PID=$!

echo ""
echo "âœ… æœåŠ¡å¯åŠ¨å®Œæˆï¼"
echo "ğŸ“¡ API: http://localhost:9001"
echo "ğŸŒ Web: http://localhost:9002"
echo ""
echo "æŒ‰ Ctrl+C åœæ­¢æ‰€æœ‰æœåŠ¡"

# ç­‰å¾…ç”¨æˆ·ä¸­æ–­
wait
EOF

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x start-dev.sh

# è¿è¡Œè„šæœ¬
./start-dev.sh
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹ API æ—¥å¿—

```bash
cd apps/api
pnpm dev
# æ—¥å¿—ä¼šå®æ—¶æ˜¾ç¤ºåœ¨ç»ˆç«¯
```

### æŸ¥çœ‹ Web æ„å»ºæ—¥å¿—

```bash
cd apps/web
pnpm dev
# Next.js æ„å»ºä¿¡æ¯ä¼šæ˜¾ç¤ºåœ¨ç»ˆç«¯
```

## ğŸ‰ å¼€å§‹å¼€å‘

ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. âœ… è®¿é—®å‰ç«¯ç•Œé¢è¿›è¡Œ UI è°ƒè¯•
2. âœ… é€šè¿‡ API æµ‹è¯•åç«¯æ¥å£
3. âœ… æŸ¥çœ‹ Linear ä»»åŠ¡å¹¶è·Ÿè¸ªè¿›åº¦
4. âœ… å¼€å§‹å¼€å‘ DeGift åŠŸèƒ½

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸš€

---

**æœ€åæ›´æ–°**: 2025-11-06
**ä½œè€…**: Claude Code Assistant
